[
    {
        "type":"view",
        "api":"/api/activity/admin/goalkeeper/tokenBucket/getById",
        "method":"get",
        "useRouteQuery":true,
        "content":[
            {
                "tagName":"span",
                "content":"权限授权>所属业务： ",
                "font":{
                    "bold":true,
                    "size":32
                },
                "grid":{
                    "top":10
                }
            },
            {
                "tagName":"span",
                "prop":"businessName",
                "font":{
                    "bold":true,
                    "size":28,
                    "color":"red"
                },
                "grid":{
                    "top":10
                }
            },
{
                "tagName":"span",
                "content":"权限名称: ",
                "font":{
                    "bold":true,
                    "size":32
                },
                "grid":{
                    "top":10
                }
            },
            {
                "tagName":"span",
                "prop":"tokenName",
                "font":{
                    "bold":true,
                    "size":28,
                    "color":"red"
                },
                "grid":{
                    "top":10
                }
            }
        ]
    },
    {
        "type":"table",
        "api":"/api/activity/admin/goalkeeper/tokenAuthorize/queryByPage",
        "method":"get",
        "useRouteQuery":true,
        "queryParams":{
            "type":"object",
            "properties":{
                "userName":{
                    "type":"string",
                    "vjsf":{
                        "title":"权限拥有人"
                    }
                },
                "authorizeType":{
                    "type":"number",
                    "vjsf":{
                        "title":"授权类型"
                    },
                    "enumKeyValue":[
                        {
                            "key":"永久授权",
                            "value":0
                        },
                        {
                            "key":"短期授权",
                            "value":1
                        }
                    ]
                },
                "status":{
                    "type":"number",
                    "vjsf":{
                        "title":"授权状态"
                    },
                    "enumKeyValue":[
                        {
                            "key":"生效中",
                            "value":0
                        },
                        {
                            "key":"已失效",
                            "value":1
                        }
                    ]
                },
                "authorizer":{
                    "type":"string",
                    "vjsf":{
                        "title":"授权人"
                    }
                }
            }
        },
        "columns":[
            {
                "prop":"id",
                "label":"授权ID"
            },
            {
                "prop":"userName",
                "label":"权限拥有人"
            },
            {
                "prop":"authorizeType",
                "label":"授权类型",
                "type":"status",
                "statusMap":{
                    "0":{
                        "label":"永久授权"
                    },
                    "1":{
                        "label":"短期授权"
                    }
                }
            },
            {
                "prop":"status",
                "label":"授权状态",
                "type":"status",
                "statusMap":{
                    "0":{
                        "label":"生效中"
                    },
                    "1":{
                        "label":"已失效"
                    }
                }
            },
            {
                "prop":"authorizeDetail",
                "label":"授权明细"
            },
            {
                "prop":"authorizeStartTimeStr",
                "label":"授权开始时间"
            },
            {
                "prop":"authorizeEndTimeStr",
                "label":"授权结束时间"
            },
            {
                "prop":"authorizer",
                "label":"授权人"
            },
            {
                "prop":"operator",
                "label":"最近操作人"
            },
            {
                "prop":"createdStr",
                "label":"授权时间"
            },
            {
                "prop":"updatedStr",
                "label":"更新时间"
            },
            {
                "type":"action",
                "label":"管理",
                "width":"180",
                "actions":[
                    {
                        "type":"modal",
                        "name":"编辑",
                        "btnType":"success",
                        "modal":{
                            "type":"form",
                            "formProps":{
                                "labelWidth":"120px"
                            },
                            "config":{
                                "type":"object",
                                "required":[
                                    "userId",
                                    "userName",
                                    "authorizeType",
                                    "status"
                                ],
                                "properties":{
                                    "userId":{
                                        "type":"string",
                                        "vjsf":{
                                            "title":"用户ID"
                                        }
                                    },
                                    "userName":{
                                        "type":"string",
                                        "vjsf":{
                                            "title":"用户昵称"
                                        }
                                    },
                                    "authorizeType":{
                                        "type":"number",
                                        "vjsf":{
                                            "title":"授权类型"
                                        },
                                        "enumKeyValue":[
                                            {
                                                "key":"永久授权",
                                                "value":0
                                            },
                                            {
                                                "key":"短期授权",
                                                "value":1
                                            }
                                        ]
                                    },
                                    "status":{
                                        "type":"number",
                                        "vjsf":{
                                            "title":"授权状态"
                                        },
                                        "enumKeyValue":[
                                            {
                                                "key":"生效中",
                                                "value":0
                                            },
                                            {
                                                "key":"已失效",
                                                "value":1
                                            }
                                        ]
                                    },
                                    "time":{
                                        "type":"array",
                                        "items":{
                                            "type":"number",
                                            "format":"date-time"
                                        },
                                        "dateRange":true,
                                        "vjsf":{
                                            "title":"有效期"
                                        }
                                    }
                                }
                            },
                            "actions":[
                                {
                                    "type":"request",
                                    "name":"确认",
                                    "api":"/api/activity/admin/goalkeeper/tokenAuthorize/update",
                                    "useRouteQuery":true,
                                    "mapping":{
                                        "id":"id",
                                        "tokenId":""
                                    },
                                    "method":"post"
                                },
                                {
                                    "type":"close",
                                    "name":"取消"
                                }
                            ]
                        }
                    },
                    {
                        "type":"modal",
                        "name":"删除",
                        "modalTitle":"是否删除权限--{{name}}",
                        "btnType":"danger",
                        "modal":{
                            "type":"view",
                            "config":{
                                "content":[
                                    {
                                        "tagName":"div",
                                        "content":"确定删除该权限吗？",
                                        "font":{
                                            "size":20
                                        }
                                    }
                                ]
                            },
                            "actions":[
                                {
                                    "type":"request",
                                    "name":"确认",
                                    "api":"/api/activity/admin/goalkeeper/tokenAuthorize/delete",
                                    "method":"post",
                                    "btnType":"primary",
                                    "mapping":{
                                        "id":"authorizeId"
                                    },
                                    "fixParams":{
                                        "status":0
                                    }
                                },
                                {
                                    "type":"close",
                                    "name":"取消"
                                }
                            ]
                        }
                    }
                ]
            },
            {
                "type":"action",
                "label":"操作",
                "width":"300",
                "actions":[
                    {
                        "type":"modal",
                        "name":"取消授权",
                        "modalTitle":"取消授权--{{tokenName}}",
                        "btnType":"danger",
                        "modal":{
                            "type":"view",
                            "config":{
                                "content":[
                                    {
                                        "tagName":"div",
                                        "content":"确定取消该权限授权吗？",
                                        "font":{
                                            "size":20
                                        }
                                    }
                                ]
                            },
                            "actions":[
                                {
                                    "type":"request",
                                    "name":"确认",
                                    "api":"/api/activity/admin/goalkeeper/tokenAuthorize/invalidTokenAuthorize",
                                    "method":"post",
                                    "btnType":"primary",
                                    "mapping":{
                                        "id":"authorizeId"
                                    },
                                    "fixParams":{
                                        "status":1
                                    }
                                },
                                {
                                    "type":"close",
                                    "name":"取消"
                                }
                            ]
                        }
                    },
                    {
                        "type":"modal",
                        "name":"恢复授权",
                        "modalTitle":"恢复授权--{{tokenName}}",
                        "btnType":"success",
                        "modal":{
                            "type":"view",
                            "config":{
                                "content":[
                                    {
                                        "tagName":"div",
                                        "content":"确定将权限授权吗？",
                                        "font":{
                                            "size":20
                                        }
                                    }
                                ]
                            },
                            "actions":[
                                {
                                    "type":"request",
                                    "name":"确认",
                                    "api":"/api/activity/admin/goalkeeper/tokenAuthorize/effectTokenAuthorize",
                                    "method":"post",
                                    "btnType":"primary",
                                    "mapping":{
                                        "id":"authorizeId"
                                    },
                                    "fixParams":{
                                        "status":0
                                    }
                                },
                                {
                                    "type":"close",
                                    "name":"取消"
                                }
                            ]
                        }
                    }
                ]
            },
            {
                "type":"action",
                "label":"细化授权管理",
                "width":"280",
                "actions":[
                    {
                        "type":"modal",
                        "name":"添加细化权限",
                        "btnType":"success",
                        "modalTitle":"权限名称：{{tokenName}} 所属业务：{{businessName}} 当前拥有的细化权限：{{authorizeDetail}}",
                        "modal":{
                            "type":"form",
                            "formProps":{
                                "labelWidth":"280px"
                            },
                            "config":{
                                "type":"object",
                                "required":[
                                    "userId"
                                ],
                                "properties":{
                                    "userId":{
                                        "type":"string",
                                        "vjsf":{
                                            "title":"细化权限业务对象ID（多个用逗号隔开）:"
                                        }
                                    }
                                }
                            },
                            "actions":[
                                {
                                    "type":"request",
                                    "name":"确认",
                                    "api":"/api/activity/admin/goalkeeper/tokenBucket/checkToken",
                                    "method":"get",
                                    "btnType":"primary",
                                    "showResult":true,
                                    "resultContent":" 匹配结果 :{{checkResult}}",
                                    "mapping":{
                                        "id":"tokenId",
                                        "userId":"",
                                        "entityValue":""
                                    }
                                },
                                {
                                    "type":"close",
                                    "name":"取消"
                                }
                            ]
                        }
                    },
                    {
                        "type":"modal",
                        "name":"移除细化权限",
                        "btnType":"danger",
                        "modalTitle":"权限名称：{{tokenName}} 所属业务：{{businessName}} 当前拥有的细化权限：{{authorizeDetail}}",
                        "modal":{
                            "type":"form",
                            "formProps":{
                                "labelWidth":"280px"
                            },
                            "config":{
                                "type":"object",
                                "required":[
                                    "userId"
                                ],
                                "properties":{
                                    "userId":{
                                        "type":"string",
                                        "vjsf":{
                                            "title":"细化权限业务对象ID（多个用逗号隔开）:"
                                        }
                                    }
                                }
                            },
                            "actions":[
                                {
                                    "type":"request",
                                    "name":"确认",
                                    "api":"/api/activity/admin/goalkeeper/tokenBucket/checkToken",
                                    "method":"get",
                                    "btnType":"primary",
                                    "showResult":true,
                                    "resultContent":" 匹配结果 :{{checkResult}}",
                                    "mapping":{
                                        "id":"tokenId",
                                        "userId":"",
                                        "entityValue":""
                                    }
                                },
                                {
                                    "type":"close",
                                    "name":"取消"
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "actions":[
            {
                "type":"modal",
                "name":"新增授权信息",
                "btnType":"success",
                "modal":{
                    "type":"form",
                    "formProps":{
                        "labelWidth":"120px"
                    },
                    "config":{
                        "type":"object",
                        "required":[
                            "userId",
                            "userName",
                            "authorizeType",
                            "status"
                        ],
                        "properties":{
                            "userId":{
                                "type":"string",
                                "vjsf":{
                                    "title":"用户ID"
                                }
                            },
                            "userName":{
                                "type":"string",
                                "vjsf":{
                                    "title":"用户昵称"
                                }
                            },
                            "authorizeType":{
                                "type":"number",
                                "vjsf":{
                                    "title":"授权类型"
                                },
                                "enumKeyValue":[
                                    {
                                        "key":"永久授权",
                                        "value":0
                                    },
                                    {
                                        "key":"短期授权",
                                        "value":1
                                    }
                                ]
                            },
                            "status":{
                                "type":"number",
                                "vjsf":{
                                    "title":"授权状态"
                                },
                                "enumKeyValue":[
                                    {
                                        "key":"生效中",
                                        "value":0
                                    },
                                    {
                                        "key":"已失效",
                                        "value":1
                                    }
                                ]
                            },
                            "authorize":{
                                "type":"array",
                                "items":{
                                    "type":"number",
                                    "format":"date-time"
                                },
                                "dateRange":true,
                                "vjsf":{
                                    "title":"有效期"
                                }
                            }
                        }
                    },
                    "actions":[
                        {
                            "type":"request",
                            "name":"确认",
                            "api":"/api/activity/admin/goalkeeper/tokenAuthorize/add",
                            "useRouteQuery":true,
                            "mapping":{
                                "id":"id"
                            },
                            "method":"post"
                        },
                        {
                            "type":"close",
                            "name":"取消"
                        }
                    ]
                }
            }
        ]
    }
]